{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,0BAKA,MAAMC,EAAO,CACXC,WAAYC,SAASC,eAAe,eACpCC,MAAOF,SAASG,cAAc,uBAC9BC,UAAWJ,SAASG,cAAc,+BAClCE,QAASL,SAASG,cAAc,YAChCG,YAAaN,SAASG,cAAc,cACpCI,SAAUP,SAASG,cAAc,uBAG7BK,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,eAC9BC,EAAa,IAAI,EAAAC,EAAAC,SACvB,IAAIC,EAAmB,EAqDvB,SAASC,EAAaC,GACpBC,EAAQnB,EAAKQ,aAEbU,EAASE,KAAIC,IACX,MAAMC,aACJA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,GACEP,EAEEQ,EAAS,6DACeN,wBAChBD,WAAsBE,kJAK9BC,6EAIAC,gFAIAC,iFAIAC,sCAKN5B,EAAKO,QAAQuB,mBAAmB,YAAaD,GAE7CnB,EAASqB,UAETC,EAAQhC,EAAKQ,YAAY,G,CAuB7B,SAASW,EAAQc,GACf,OAAOA,EAAGC,UAAUC,IAAI,kB,CAG1B,SAASH,EAAQC,GACf,OAAOA,EAAGC,UAAUE,OAAO,kB,CAzH7BpC,EAAKC,WAAWoC,iBAAiB,UAIjC,SAAqBC,GACnBA,EAAEC,iBAGF,IAAIC,EAAaxC,EAAKI,MAAMqC,MAAMC,OAGlC,IAAKF,GAAcA,IAAe3B,EAAW8B,WAC3C,OAIF3C,EAAKI,MAAMqC,MAAQD,EAGnBxC,EAAKI,MAAMwC,OAEX/B,EAAWgC,SAASL,GACpB3B,EAAWiC,kBAEXjC,EACGkC,cACAC,MAAK,EAACC,KAAEA,EAAIC,UAAEA,MAmBnB,IAAuBhC,EAlBG,IAAhB+B,EAAKE,QAOTrD,EAAAsD,OAAOC,KAAK,oBAAoBH,aAEhClC,EAAmBsC,KAAKC,KAAKL,EAAYD,EAAKE,OAAS,GAStCjC,EAPH+B,EAQlBjD,EAAKO,QAAQiD,UAAY,GAEzBvC,EAAaC,GARTc,EAAQhC,EAAKS,WAZXX,EAAAsD,OAAOK,QACL,2EAWkB,IAEvBC,OAAMC,GAASA,EAAMC,S,IAzC1B5D,EAAKQ,YAAY6B,iBAAiB,SAgGlC,WACExB,EAAWgD,sBAEXhD,EAAWkC,cAAcC,MAAK,EAACC,KAAEA,MAC3BjC,GAAoB,GACtBlB,EAAAsD,OAAOC,KACL,6DACAlC,EAAQnB,EAAKQ,cAIjBQ,GAAoB,EAEpBC,EAAagC,GAqBjB,WACE,MAAQa,OAAQC,GAAe7D,SAC5BG,cAAc,YACd2D,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,IAAbL,EACLM,SAAU,U,CA1BVC,EAAoB,G,IA9GxBtE,EAAKS,SAAS4B,iBAAiB,SA0H/B,WACE6B,OAAOK,SAAS,CACdH,IAAK,EACLC,SAAU,U","sources":["src/js/gallery_with_button.js"],"sourcesContent":["import { Notify } from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport PixabayAPI from './fetchPhotos';\n\nconst refs = {\n  searchForm: document.getElementById('search-form'),\n  input: document.querySelector('.search-form__input'),\n  submitBtn: document.querySelector('.search-form__submit-button'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n  toTopBtn: document.querySelector('.scroll-top-button'),\n};\n\nconst lightbox = new SimpleLightbox('.photo-link');\nconst pixabayAPI = new PixabayAPI();\nlet contentPagesLeft = 0;\n\nrefs.searchForm.addEventListener('submit', submitQuery);\nrefs.loadMoreBtn.addEventListener('click', loadMorePics);\nrefs.toTopBtn.addEventListener('click', scrollToTop);\n\nfunction submitQuery(e) {\n  e.preventDefault();\n\n  /**sanitizes query */\n  let inputValue = refs.input.value.trim();\n\n  /**checking if current query is the same as the previous one, to reduce the load on server  */\n  if (!inputValue || inputValue === pixabayAPI.getQuery()) {\n    return;\n  }\n\n  /**just for a cleaner look of input field after sanitizing */\n  refs.input.value = inputValue;\n\n  /**removes focus of the input field after submit */\n  refs.input.blur();\n\n  pixabayAPI.setQuery(inputValue);\n  pixabayAPI.resetPageNumber();\n\n  pixabayAPI\n    .fetchPhotos()\n    .then(({ hits, totalHits }) => {\n      if (hits.length === 0) {\n        Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        return;\n      }\n\n      Notify.info(`Hooray! We found ${totalHits} images.`);\n\n      contentPagesLeft = Math.ceil(totalHits / hits.length - 1);\n\n      loadFirstPics(hits);\n\n      showBtn(refs.toTopBtn);\n    })\n    .catch(error => error.message);\n}\n\nfunction loadFirstPics(pictures) {\n  refs.gallery.innerHTML = '';\n\n  renderMarkup(pictures);\n}\n\nfunction renderMarkup(pictures) {\n  hideBtn(refs.loadMoreBtn);\n\n  pictures.map(picture => {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = picture;\n\n    const markup = `<div class=\"photo-card\">\n    <a class=\"photo-link\" href=\"${largeImageURL}\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" width=\"305px\" height=\"200px\"/>\n    </a>\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b>\n        ${likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b>\n        ${views}\n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b>\n        ${comments}\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b>\n        ${downloads}\n      </p>\n    </div>\n  </div>`;\n\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n\n    showBtn(refs.loadMoreBtn);\n  });\n}\n\nfunction loadMorePics() {\n  pixabayAPI.incrementPageNumber();\n\n  pixabayAPI.fetchPhotos().then(({ hits }) => {\n    if (contentPagesLeft <= 0) {\n      Notify.info(\n        \"We're sorry, but you've reached the end of search results.\",\n        hideBtn(refs.loadMoreBtn)\n      );\n    }\n\n    contentPagesLeft -= 1;\n\n    renderMarkup(hits);\n\n    scrollToNextResult();\n  });\n}\n\nfunction hideBtn(el) {\n  return el.classList.add('visually-hidden');\n}\n\nfunction showBtn(el) {\n  return el.classList.remove('visually-hidden');\n}\n\nfunction scrollToTop() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n\nfunction scrollToNextResult() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2.2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$eWCmQ","parcelRequire","$4b26c89b737d11a8$var$refs","searchForm","document","getElementById","input","querySelector","submitBtn","gallery","loadMoreBtn","toTopBtn","$4b26c89b737d11a8$var$lightbox","$parcel$interopDefault","$fZKcF","$4b26c89b737d11a8$var$pixabayAPI","$7tL9G","default","$4b26c89b737d11a8$var$contentPagesLeft","$4b26c89b737d11a8$var$renderMarkup","pictures","$4b26c89b737d11a8$var$hideBtn","map","picture","webformatURL","largeImageURL","tags","likes","views","comments","downloads","markup","insertAdjacentHTML","refresh","$4b26c89b737d11a8$var$showBtn","el","classList","add","remove","addEventListener","e","preventDefault","inputValue","value","trim","getQuery","blur","setQuery","resetPageNumber","fetchPhotos","then","hits","totalHits","length","Notify","info","Math","ceil","innerHTML","failure","catch","error","message","incrementPageNumber","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$4b26c89b737d11a8$var$scrollToNextResult","scrollTo"],"version":3,"file":"gallery_with_button.2db2852b.js.map"}