{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BAKMC,EAAO,CACXC,WAAYC,SAASC,eAAe,eACpCC,MAAOF,SAASG,cAAc,uBAC9BC,UAAWJ,SAASG,cAAc,+BAClCE,QAASL,SAASG,cAAc,YAChCG,SAAUN,SAASG,cAAc,uBAG7BI,EAAW,IAAIC,EAAAC,GAAJ,CAAmB,eAC9BC,EAAa,IAAI,EAAAC,EAAAC,SAuDvB,SAASC,EAAaC,GACpBA,EAASC,KAAI,SAAAC,GACX,IACEC,EAOED,EAPFC,aACAC,EAMEF,EANFE,cACAC,EAKEH,EALFG,KACAC,EAIEJ,EAJFI,MACAC,EAGEL,EAHFK,MACAC,EAEEN,EAFFM,SACAC,EACEP,EADFO,UAGIC,EAAS,6DAEDC,OADgBP,EAAc,wBACRO,OAAtBR,EAAa,WAKrBQ,OAL8BN,EAAK,kJASnCM,OAJAL,EAAM,6EAQNK,OAJAJ,EAAM,gFAQNI,OAJAH,EAAS,iFAICG,OAAVF,EAAU,sCAKhBzB,EAAKO,QAAQqB,mBAAmB,YAAaF,GAE7CjB,EAASoB,S,IAzFb7B,EAAKC,WAAW6B,iBAAiB,UAIjC,SAAqBC,GACnBA,EAAEC,iBAGF,IAAIC,EAAajC,EAAKI,MAAM8B,MAAMC,OAGlC,IAAKF,GAAcA,IAAerB,EAAWwB,WAC3C,OAIFpC,EAAKI,MAAM8B,MAAQD,EAGnBjC,EAAKI,MAAMiC,OAEXzB,EAAW0B,SAASL,GACpBrB,EAAW2B,kBAEX3B,EACG4B,cACAC,MAAK,SAAAC,G,IAmBa1B,EAnBV2B,EAAID,EAAJC,KAAMC,EAASF,EAATE,UACO,IAAhBD,EAAKE,QAOT/C,EAAAgD,OAAOC,KAAK,oBAA8BpB,OAAViB,EAAU,aAEvBI,KAAKC,KAAKL,EAAYD,EAAKE,OAAS,GAStC7B,EAPH2B,EAQlB3C,EAAKO,QAAQ2C,UAAY,GAEzBnC,EAAaC,GARDhB,EAAKQ,SAwEP2C,UAAUC,OAAO,oBApFrBtD,EAAAgD,OAAOO,QACL,2E,IAaLC,OAAM,SAAAC,G,OAASA,EAAMC,O,OAzC1BxD,EAAKQ,SAASsB,iBAAiB,SAkH/B,WACE2B,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,U","sources":["src/js/gallery_infinite-scroll.js"],"sourcesContent":["import { Notify } from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport PixabayAPI from './fetchPhotos';\n\nconst refs = {\n  searchForm: document.getElementById('search-form'),\n  input: document.querySelector('.search-form__input'),\n  submitBtn: document.querySelector('.search-form__submit-button'),\n  gallery: document.querySelector('.gallery'),\n  toTopBtn: document.querySelector('.scroll-top-button'),\n};\n\nconst lightbox = new SimpleLightbox('.photo-link');\nconst pixabayAPI = new PixabayAPI();\nlet contentPagesLeft = 0;\n\n/** Listeners*/\nrefs.searchForm.addEventListener('submit', submitQuery);\nrefs.toTopBtn.addEventListener('click', scrollToTop);\n\n/** Functions */\nfunction submitQuery(e) {\n  e.preventDefault();\n\n  /**sanitizes query */\n  let inputValue = refs.input.value.trim();\n\n  /**checking if current query is the same as the previous one, to reduce the load on server  */\n  if (!inputValue || inputValue === pixabayAPI.getQuery()) {\n    return;\n  }\n\n  /**just for a cleaner look of input field after sanitizing */\n  refs.input.value = inputValue;\n\n  /**removes focus from the input field after submit */\n  refs.input.blur();\n\n  pixabayAPI.setQuery(inputValue);\n  pixabayAPI.resetPageNumber();\n\n  pixabayAPI\n    .fetchPhotos()\n    .then(({ hits, totalHits }) => {\n      if (hits.length === 0) {\n        Notify.failure(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n        return;\n      }\n\n      Notify.info(`Hooray! We found ${totalHits} images.`);\n\n      contentPagesLeft = Math.ceil(totalHits / hits.length - 1);\n\n      loadFirstPics(hits);\n\n      showBtn(refs.toTopBtn);\n    })\n    .catch(error => error.message);\n}\n\nfunction loadFirstPics(pictures) {\n  refs.gallery.innerHTML = '';\n\n  renderMarkup(pictures);\n}\n\nfunction renderMarkup(pictures) {\n  pictures.map(picture => {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = picture;\n\n    const markup = `<div class=\"photo-card\">\n    <a class=\"photo-link\" href=\"${largeImageURL}\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" width=\"305px\" height=\"200px\"/>\n    </a>\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b>\n        ${likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b>\n        ${views}\n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b>\n        ${comments}\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b>\n        ${downloads}\n      </p>\n    </div>\n  </div>`;\n\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n  });\n}\n\nfunction loadMorePics() {\n  pixabayAPI.incrementPageNumber();\n\n  pixabayAPI.fetchPhotos().then(({ hits }) => {\n    if (contentPagesLeft <= 0) {\n      Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n\n    contentPagesLeft -= 1;\n\n    renderMarkup(hits);\n  });\n}\n\nfunction hideBtn(el) {\n  return el.classList.add('visually-hidden');\n}\n\nfunction showBtn(el) {\n  return el.classList.remove('visually-hidden');\n}\n\nfunction scrollToTop() {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$iU1Pc","parcelRequire","$d7eae090ace82758$var$refs","searchForm","document","getElementById","input","querySelector","submitBtn","gallery","toTopBtn","$d7eae090ace82758$var$lightbox","$parcel$interopDefault","$5IjG7","$d7eae090ace82758$var$pixabayAPI","$1nXjm","default","$d7eae090ace82758$var$renderMarkup","pictures","map","picture","webformatURL","largeImageURL","tags","likes","views","comments","downloads","markup","concat","insertAdjacentHTML","refresh","addEventListener","e","preventDefault","inputValue","value","trim","getQuery","blur","setQuery","resetPageNumber","fetchPhotos","then","param","hits","totalHits","length","Notify","info","Math","ceil","innerHTML","classList","remove","failure","catch","error","message","window","scrollTo","top","behavior"],"version":3,"file":"gallery_infinite-scroll.941cfd6c.js.map"}